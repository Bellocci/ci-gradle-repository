/*
 * JACOCO profile
 */

test {
	useJUnit()
	
	// show standard out and standard error of the test JVM(s) on the console
	testLogging.showStandardStreams = true
	
	// Fail the 'test' task on the first test failure
  	failFast = true
  	
  	finalizedBy jacocoTestReport
}

jacocoTestReport {
    dependsOn test
}

jacocoTestCoverageVerification {
  violationRules {
    rule {
      element = 'CLASS'      
      limit {
        minimum = 1
      }   
    }
    rule { 
      limit {
        counter = 'INSTRUCTIONS' 
        value = 'MISSEDRATIO'
        minimum = 0.3
      } 
    }
    rule {
    	limit {
    		counter = 'LINE'
    		value = 'COVEREDRATIO'
    		minimum = 0.8
    	}
    }
  }
}